<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Избранные темы | Youvi Forums</title>
<link rel="stylesheet" href="forum-dark-theme.css">
<link rel="stylesheet" href="../youvi/header/youvi-header.css">
<link rel="stylesheet" href="../youvi/sidebar-scroll.css">
<link rel="stylesheet" href="../youvi/sidebar.css">
<link rel="stylesheet" href="../youvi/themes/theme-dropdown.css">
<script>
  (function() {
    var theme = localStorage.getItem('youvi-theme');
    var sidebar = localStorage.getItem('sidebarCollapsed');
    
    var htmlClasses = [];
    if (theme === 'dark') htmlClasses.push('dark-theme');
    if (sidebar === 'true') htmlClasses.push('sidebar-collapsed');
    if (htmlClasses.length) document.documentElement.className = htmlClasses.join(' ');
  })();
</script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial, sans-serif;background:#fff;color:#111;--header-height:84px;--footer-height:220px}
.top-nav{background:#d94b88;border-bottom:1px solid #c2185b;padding:4px 0}
.top-nav-content{max-width:none !important;margin:0 !important;padding:0 20px;display:flex;gap:20px;align-items:center}
.top-nav a{color:#fff;text-decoration:none;font-size:12px;padding:2px 0;transition:color .2s}
.top-nav a:hover,.top-nav a.active{color:#ffd6ea}
.header{background:#FFE7F4;padding:0;border-bottom:1px solid #f2cfe1;min-height:40px;width:100%;position:sticky;top:0;z-index:100}
.header-content-wrapper{display:flex;align-items:center;position:relative;box-sizing:border-box;max-width:none !important;margin:0 !important;padding:0 20px;width:100%;min-height:40px}
.header-left{display:flex;align-items:center;gap:15px;flex-shrink:0}
.header-center{position:absolute;left:50%;transform:translateX(-50%);display:flex;align-items:center;z-index:1}
.header-right{display:flex;align-items:center;gap:10px;margin-left:auto;flex-shrink:0}
.search-area{display:flex;gap:6px;align-items:center;width:530px;position:relative}
.search-input{width:450px;padding:6px 12px;border-radius:4px;border:1px solid rgba(0,0,0,0.1);font-size:13px;height:32px;box-sizing:border-box}
.search-btn{width:70px;height:32px;padding:0;background:#ff69b4;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;font-weight:600;display:flex;align-items:center;justify-content:center;text-align:center;line-height:1;flex-shrink:0;white-space:nowrap;box-sizing:border-box;transition:background-color .2s}
.search-btn:hover{background:#ff85c3}
.container{width:100%;margin:0;padding:0 20px 0 20px;display:flex;gap:20px;align-items:stretch;min-height:calc(100vh - 40px - 40px)}
.content-wrapper{display:flex;flex:1;max-width:1500px;margin:0 auto;gap:20px;background:#fff}
body.dark-theme .content-wrapper{background:#111}
.user-actions{display:flex;gap:8px;align-items:center;margin-left:0;flex-shrink:0}
.user-actions a{color:#111;text-decoration:none;font-size:13px;font-weight:500;padding:4px 8px;border-radius:4px;transition:background .2s}
.user-actions a:hover{color:#ff69b4}
.logo{display:flex;align-items:center;justify-content:center;margin-right:0;flex-shrink:0;height:40px}
.logo img{height:30px;width:auto;max-height:30px}
.main-content{flex:1;display:flex;flex-direction:column;min-height:0;padding-top:0;background:#fff;padding-bottom:12px}
/* Sidebar offset for sticky header */
.sidebar:not(.chats-sidebar) {
    top: 40px !important;
    max-height: calc(100vh - 40px) !important;
    min-height: calc(100vh - 40px) !important;
}
.breadcrumbs{display:flex;align-items:center;gap:4px;font-size:13px;color:#666;margin:20px 20px 10px 20px;flex-wrap:wrap}
.breadcrumbs a{color:#666;text-decoration:none;transition:color .2s}
.breadcrumbs a:hover{color:#ff69b4}
.breadcrumb-separator{color:#999}
.page-header{background:#fafafa;border:1px solid #e0e0e0;border-radius:6px;padding:16px 18px;margin:0 20px 16px 20px}
.page-title{font-size:21px;font-weight:600;color:#111;margin-bottom:6px;line-height:1.3}
.page-desc{font-size:13px;color:#666}
.footer{background:#2c2c2c;color:#fff;padding:25px 0 15px 0;margin-top:auto}
.footer-content{max-width:1400px !important;margin:0 auto !important;padding:0 20px !important;display:flex;gap:30px;align-items:flex-start}
.footer-main{display:flex;gap:30px;flex:1}
.footer-logo{flex-shrink:0;width:200px}
.footer-logo img{height:40px;width:auto}
.footer-logo p{margin-top:8px;font-size:11px;color:#ccc;line-height:1.3}
.footer-sections{display:flex;gap:30px;flex:1}
.footer-right{display:flex;gap:20px;align-items:flex-start}
.footer-mascot{flex-shrink:0}
.footer-mascot img{height:180px;width:auto}
.footer-section{flex:1}
.footer-section h3{font-size:13px;margin-bottom:10px;color:#fff;font-weight:600}
.footer-section ul{list-style:none;padding:0;margin:0}
.footer-section li{margin-bottom:6px}
.footer-section a{color:#ccc;text-decoration:none;font-size:11px;transition:color .2s}
.footer-section a:hover{color:#ff69b4}
.footer-bottom{border-top:1px solid #444;margin-top:20px;padding-top:15px;text-align:center;color:#999;font-size:10px}

/* Threads list styled identically to forum_board */
.thread-list{background:#fafafa;margin:0 20px}
.boards-header{display:grid;grid-template-columns:1fr 120px 280px 40px;gap:0;background:#f0f0f0;color:#666;font-size:12px;padding:8px 16px;border-bottom:1px solid #e0e0e0}
.boards-header div:nth-child(2){text-align:center}
.board-item{display:grid;grid-template-columns:1fr 120px 280px 40px;gap:0;align-items:center;padding:8px 16px;border-bottom:1px solid #e8e8e8;transition:background-color .15s;text-decoration:none;color:inherit}
.board-item:last-child{border-bottom:none}
.board-item:hover{background:#f0f0f0}
.board-info{display:flex;gap:14px;align-items:center;min-width:0}
.board-title{font-size:15px;font-weight:500;color:#111;margin-bottom:2px;line-height:1.3}
.board-description{font-size:12px;color:#666;line-height:1.3}
.board-description a{color:#ff69b4;text-decoration:none;transition:color .2s}
.board-description a:hover{color:#e91e63}
.posts-stats{font-size:13px;color:#333;text-align:center}
.last-post{font-size:12px;color:#666;line-height:1.2;overflow:hidden}
.last-post-title{display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-break:break-word;overflow-wrap:anywhere;margin-bottom:2px}
.last-post-title a{color:inherit;text-decoration:none;transition:color .2s}
.last-post-title a:hover{color:#ff69b4}
.last-post-author{color:#888}
.last-post-author a{color:#ff69b4;text-decoration:none;transition:color .2s}
.last-post-author a:hover{color:#e91e63}
.last-post-time{color:#999}
.thread-link{color:#111;text-decoration:none}
.thread-link:hover{color:#c2185b;text-decoration:underline}
.small-btn{font-size:11px;padding:3px 6px;margin-left:6px;border-radius:0;background:#fff;border:1px solid #e0e0e0;cursor:pointer;font-weight:700;text-decoration:none;color:#111;display:inline-block}
.small-btn:hover{background:#f0f0f0;border-color:#ccc}
.bookmark-icon-btn{background:#fff;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer;padding:6px;display:inline-flex;align-items:center;justify-content:center;transition:all .2s;color:#666}
.bookmark-icon-btn:hover{background:#ffebee;border-color:#ffcdd2;color:#d32f2f}
.bookmark-icon-btn:active{transform:scale(0.95)}
.bookmark-icon-btn.bookmarked{background:#d94b88;border-color:#d94b88;color:#fff}
.bookmark-icon-btn.bookmarked:hover{background:#c2185b;border-color:#c2185b}
.empty{text-align:center;color:#999;font-size:13px;padding:40px;background:#f9f9f9;border:1px solid #e0e0e0;border-radius:8px}

/* PC Adaptive Styling */
@media (min-width: 1700px) {
    .content-wrapper{max-width:1600px}
    .footer-content{max-width:1700px !important}
}
@media (min-width: 2000px) {
    .content-wrapper{max-width:1850px}
    .footer-content{max-width:1900px !important}
}
@media (min-width: 2400px) {
    .content-wrapper{max-width:2200px}
    .footer-content{max-width:2200px !important}
}
@media (min-width: 2800px) {
    .content-wrapper{max-width:2500px}
    .footer-content{max-width:2500px !important}
}
/* Sidebar collapsed adaptations */
@media (min-width: 1700px) {
    .sidebar-collapsed .content-wrapper,
    html.sidebar-collapsed .content-wrapper {
        max-width: 1700px !important;
    }
}
@media (min-width: 2000px) {
    .sidebar-collapsed .content-wrapper,
    html.sidebar-collapsed .content-wrapper {
        max-width: 1950px !important;
    }
}
@media (min-width: 2400px) {
    .sidebar-collapsed .content-wrapper,
    html.sidebar-collapsed .content-wrapper {
        max-width: 2300px !important;
    }
}
@media (min-width: 2800px) {
    .sidebar-collapsed .content-wrapper,
    html.sidebar-collapsed .content-wrapper {
        max-width: 2600px !important;
    }
}
/* Dark theme additions */
body.dark-theme .header {
    background: #2c1810 !important;
    border-bottom: 1px solid #444 !important;
}
body.dark-theme .sidebar-toggle-btn {
    color: #fff !important;
}
body.dark-theme .sidebar-toggle-btn svg {
    fill: #fff !important;
}
body.dark-theme .user-actions a {
    color: #fff !important;
}
body.dark-theme .user-actions a:hover {
    color: #ff69b4 !important;
}
body.dark-theme .search-input {
    background: #4a3a34 !important;
    border-color: #555;
    color: #fff;
}
body.dark-theme .search-input::placeholder {
    color: #999;
}

/* Responsive */
@media (max-width:768px){
  .container{flex-direction:column;padding:10px}
  .footer-content{flex-direction:column;gap:20px}
  .footer-sections{flex-direction:column;gap:15px}
  .footer-section{text-align:center}
  .footer-mascot img{height:120px}
  .boards-header{grid-template-columns:1fr 80px 200px 30px;font-size:11px;padding:6px 12px}
  .board-item{grid-template-columns:1fr 80px 200px 30px;padding:6px 12px}
  .board-title{font-size:14px}
  .board-description{font-size:11px}
  .posts-stats{font-size:12px}
  .last-post{font-size:11px}
}
</style>
</head>
<link rel="icon" href="../favicon/youvi/favicon.ico" type="image/x-icon">
<body>
<script src="../youvi_shared.js"></script>
<script src="forum_youvi_integration.js"></script>
<script src="../youvi/themes/theme-toggle.js"></script>
  <div class="top-nav">
    <div class="top-nav-content">
      <a href="../youvi_main.html">Видео</a>
      <a href="../index.html">Управление</a>
      <a href="../youvi_ch_list.html">Каналы</a>
      <a href="../youvi_playlists_list.html">Плейлисты</a>
      <a href="forum.html" class="active">Форумы</a>
      <a href="../wiki/index.html" data-i18n="nav.wiki">Wiki</a>
    </div>
  </div>

  <header class="header">
    <div class="header-content-wrapper">
      <div class="header-left">
        <button id="sidebarToggle" class="sidebar-toggle-btn" aria-label="Toggle sidebar">
          <svg viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </button>
        
        <div class="logo">
          <a href="forum.html"><img src="../images/logo_youvi_ind.png" alt="Forum Logo"></a>
        </div>
      </div>
      
      <div class="header-center">
        <div class="search-area">
          <input type="text" class="search-input" id="forumHeaderSearchInput" placeholder="Поиск в форуме...">
          <button class="search-btn" id="forumHeaderSearchBtn">Поиск</button>
        </div>
      </div>
      
      <div class="header-right">
        <div class="user-actions">
          <div class="settings-container">
            <a href="#" class="settings-btn">⚙</a>
            <div class="theme-dropdown">
              <button class="theme-dropdown-item" data-theme="light">Белая</button>
              <button class="theme-dropdown-item" data-theme="dark">Черная</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Left Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Навигация</div>
        <a href="../youvi_main.html" class="sidebar-item nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9,22 9,12 15,12 15,22"/>
          </svg>
          <span>Главная</span>
        </a>
        <a href="../youvi_tags.html" class="sidebar-item nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
            <line x1="7" y1="7" x2="7.01" y2="7"/>
          </svg>
          <span>Все теги</span>
        </a>
      </div>
      
      
      <div class="sidebar-section">
        <div class="sidebar-title">Форум</div>
        <a href="forum.html" class="sidebar-item nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <span>Главная</span>
        </a>
        <a href="forum_recent.html" class="sidebar-item nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <path d="M4 11a9 9 0 0 1 9 9"/>
            <path d="M4 4a16 16 0 0 1 16 16"/>
            <path d="M5 20a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
          </svg>
          <span>Поток</span>
        </a>
        <a href="forum_search.html" class="sidebar-item nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <span>Поиск</span>
        </a>
        <a href="forum_fav.html" class="sidebar-item library-item active">
          <svg viewBox="0 0 24 24" fill="none" stroke="#ff69b4" stroke-width="1.5">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span>Избранное</span>
        </a>
        <a href="forum_members.html" class="sidebar-item library-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 1-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span>Участники</span>
        </a>

      </div>
    </aside>

    <!-- Content Wrapper (centered) -->
    <div class="content-wrapper">
    <main class="main-content">
      <div class="breadcrumbs">
        <a href="forum_main.html">Форум</a>
        <span class="breadcrumb-separator">→</span>
        <span style="font-weight:600">Избранные темы</span>
      </div>

      <div class="page-header">
        <h1 class="page-title">Избранные темы</h1>
        <div class="page-desc">Ваши сохраненные темы с разных досок форума</div>
      </div>

      <section class="thread-list">
        <div class="boards-header">
          <div>Тема</div>
          <div>Доска</div>
          <div>Добавлено</div>
          <div></div>
        </div>
        <div id="bookmarksList">
          <div style="padding:14px 16px;color:#666;text-align:center">Загрузка закладок...</div>
        </div>
      </section>
    </main>
    </div><!-- /content-wrapper -->
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-main">
        <div class="footer-logo">
          <img src="../images/logo_youvi_ind_ex.png" alt="Youvi">
          <p>Платформа для общения и обсуждений. Делитесь мыслями и идеями.</p>
        </div>
        <div class="footer-sections">
          <div class="footer-section">
            <h3>Разделы</h3>
            <ul>
              <li><a href="../youvi_main.html">Видео</a></li>
              <li><a href="../youvi_tags.html">Теги</a></li>
              <li><a href="forum.html">Форумы</a></li>
              <li><a href="../index.html">Управление</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Библиотека</h3>
            <ul>
              <li><a href="../youvi_ch_list.html">Каналы</a></li>
              <li><a href="../youvi_playlists_list.html">Плейлисты</a></li>
              <li><a href="../youvi_subscriptions.html">Подписки</a></li>
              <li><a href="../youvi_fav.html">Избранное</a></li>
              <li><a href="../youvi_history.html">История</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Wiki</h3>
            <ul>
              <li><a href="../wiki/index.html">Главная</a></li>
              <li><a href="../wiki/player.html">Плеер</a></li>
              <li><a href="../wiki/danmaku.html">Данмаку</a></li>
              <li><a href="../wiki/tags/general.html">Теги</a></li>
              <li><a href="../wiki/tags/rules.html">Правила тегирования</a></li>
              <li><a href="../wiki/search/general.html">Поиск</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>PGC</h3>
            <ul>
              <li><a href="../youvi_main.html?tag=Anime (ct)">Anime</a></li>
              <li><a href="../youvi_main.html?tag=Animation (ct)">Animation</a></li>
              <li><a href="../youvi_main.html?tag=Movies (ct)">Movies</a></li>
              <li><a href="../youvi_main.html?tag=Series (ct)">Series</a></li>
              <li><a href="../youvi_main.html?tag=Music (ct)">Music</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>UGC</h3>
            <ul>
              <li><a href="../youvi_main.html?tag=Games (ct)">Games</a></li>
              <li><a href="../youvi_main.html?tag=Technology (ct)">Technology</a></li>
              <li><a href="../youvi_main.html?tag=Entertainment (ct)">Entertainment</a></li>
              <li><a href="../youvi_main.html?tag=IRL (ct)">IRL</a></li>
              <li><a href="../youvi_main.html?tag=TV (ct)">TV</a></li>
              <li><a href="../youvi_main.html?tag=Education (ct)">Education</a></li>
              <li><a href="../youvi_main.html?tag=Other (ct)">Other</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>О сайте</h3>
            <ul>
              <li><a href="../wiki/about.html">Про сайт</a></li>
              <li><a href="../wiki/docs.html">Документация</a></li>
              <li><a href="../wiki/tech.html">Технологии</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-right">
        <div class="footer-mascot">
          <img src="../images/mascot1.png" alt="Yuvi">
        </div>
      </div>
    </div>
  </footer>

<script>
'use strict';

class ForumFavorites {
  constructor() {
    this.BOARDS = {
      'general': 'Общее',
      'images': 'Картинки',
      'news': 'Новости сайта',
      'anime': 'Аниме',
      'videogames': 'Видеоигры', 
      'tv-and-cinema': 'Кино и ТВ',
      'music': 'Музыка',
      'study': 'Учёба',
      'everyday': 'Повседневность',
      'city': 'Город',
      'notes': 'Заметки',
      'internet': 'Интернет',
      'gadgets': 'Гаджеты',
      'technology': 'Технологии',
      'companies': 'Компании'
    };
    
    this.bookmarksContainer = null;
    this.searchInput = null;
    this.searchBtn = null;
  }

  init() {
    this.cacheElements();
    this.setupEventListeners();
    this.loadBookmarks();
  }

  cacheElements() {
    this.bookmarksContainer = document.getElementById('bookmarksList');
    this.searchInput = document.querySelector('.search-input');
    this.searchBtn = document.querySelector('.search-btn');
  }

  setupEventListeners() {
    if (!this.searchBtn || !this.searchInput) return;
    
    const handleSearch = () => {
      const query = this.searchInput.value.trim();
      if (query) {
        window.location.href = `forum_search.html?q=${encodeURIComponent(query)}`;
      }
    };
    
    this.searchBtn.addEventListener('click', handleSearch);
    this.searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') handleSearch();
    });
  }

  loadBookmarks() {
    const bookmarks = this.getBookmarks();
    this.renderBookmarks(bookmarks);
  }

  getBookmarks() {
    const bookmarks = [];
    const keys = Object.keys(localStorage);
    
    for (const key of keys) {
      if (!key.startsWith('bookmark_') || key === 'bookmark_' || localStorage.getItem(key) !== 'true') {
        continue;
      }
      
      const parts = key.split('_');
      if (parts.length < 3) continue;
      
      const [, boardId, threadId] = parts;
      const dataKey = `bookmark_data_${boardId}_${threadId}`;
      const bookmarkData = localStorage.getItem(dataKey);
      
      if (bookmarkData) {
        try {
          bookmarks.push(JSON.parse(bookmarkData));
        } catch (e) {
          console.warn('Invalid bookmark data:', dataKey);
        }
      }
    }
    
    return bookmarks.sort((a, b) => b.addedAt - a.addedAt);
  }

  renderBookmarks(bookmarks) {
    if (!this.bookmarksContainer) return;
    
    if (bookmarks.length === 0) {
      this.bookmarksContainer.innerHTML = '<div class="empty">Нет избранных тем. Добавьте темы в закладки на страницах тредов.</div>';
      return;
    }
    
    const fragment = document.createDocumentFragment();
    
    bookmarks.forEach(bookmark => {
      const row = this.createBookmarkElement(bookmark);
      fragment.appendChild(row);
    });
    
    this.bookmarksContainer.innerHTML = '';
    this.bookmarksContainer.appendChild(fragment);
  }

  createBookmarkElement(bookmark) {
    const row = document.createElement('a');
    row.className = 'board-item';
    row.href = `forum_thread.html?board=${bookmark.boardId}&id=${bookmark.threadId}`;
    row.setAttribute('data-board-id', bookmark.boardId);
    row.setAttribute('data-thread-id', bookmark.threadId);
    
    const escTitle = this.escapeHtml(bookmark.threadTitle);
    const escBoardName = this.escapeHtml(bookmark.boardName);
    const formattedDate = new Date(bookmark.addedAt).toLocaleString();
    
    row.innerHTML = `
      <div class="board-info">
        <div>
          <div class="board-title">${escTitle}</div>
          <div class="board-description">Доска: <a href="forum_board.html?id=${bookmark.boardId}">${escBoardName}</a></div>
        </div>
      </div>
      <div class="posts-stats">${escBoardName}</div>
      <div class="last-post">
        <div class="last-post-time">${formattedDate}</div>
      </div>
      <div style="text-align:right;display:flex;gap:8px;align-items:center;justify-content:flex-end">
        <button class="bookmark-icon-btn bookmarked" onclick="event.preventDefault(); app.removeBookmark('${bookmark.boardId}', '${bookmark.threadId}')" title="Удалить из избранного">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 2C3.9 2 3 2.9 3 4V22L12 18L21 22V4C21 2.9 20.1 2 19 2H5Z" fill="currentColor"/>
        </button>
      </div>
    `;
    
    return row;
  }

  removeBookmark(boardId, threadId) {
    if (!confirm('Удалить тему из избранного?')) return;
    
    // Найти элемент для анимации
    const bookmarkElement = document.querySelector(`[data-board-id="${boardId}"][data-thread-id="${threadId}"]`);
    if (bookmarkElement) {
      bookmarkElement.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
      bookmarkElement.style.opacity = '0';
      bookmarkElement.style.transform = 'translateX(-20px)';
      
      setTimeout(() => {
        localStorage.removeItem(`bookmark_${boardId}_${threadId}`);
        localStorage.removeItem(`bookmark_data_${boardId}_${threadId}`);
        this.loadBookmarks();
      }, 300);
    } else {
      localStorage.removeItem(`bookmark_${boardId}_${threadId}`);
      localStorage.removeItem(`bookmark_data_${boardId}_${threadId}`);
      this.loadBookmarks();
    }
  }

  escapeHtml(text) {
    return text
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#039;');
  }
}

const app = new ForumFavorites();
window.app = app;

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => app.init());
} else {
  app.init();
}

// Theme system is handled by theme-toggle.js

</script>

<script src="../youvi/sidebar-toggle.js"></script>
<script src="../youvi/sidebar-scroll.js"></script>
<script src="../youvi/header/youvi-header.js"></script>
</body>
</html>
